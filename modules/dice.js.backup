const WRONG_DICE_WARNING = "I don't have that die, so I'll roll a random one.\nI have a 2-sided coin, and 4-, 6-, 8-, 10-, 12-, 20-, and 100-sided dice.\n\n";

module.exports = {
  dice: [2, 4, 6, 8, 10, 12, 20, 100],
  invoke: function(n) {
    // console.log(`Preparing to roll ${n}-sided die`);
    let index = 0,
      die, warn = "";
    // User selected die
    if (this.dice.includes(n)) {
      die = n;
      // Select a random die
    } else {
      index = Math.floor(Math.random() * this.dice.length);
      die = this.dice[index];
      if (n === 0) {
        warn = WRONG_DICE_WARNING;
      }
    }

    let roll = Math.ceil(Math.random() * die);

    // Return result
    if (die === 2) { // If it flips a coin (because dice[0] = 2)
      return warn + "Flipping a coin. I got **" +
        (roll === 1 ? "heads" : "tails") + "**.";
    } else {
      return warn + "Rolling 1d" + die + ". I got **" + roll + "**.";
    }
  }
};
